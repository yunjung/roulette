let t;function i(t){return t&&t.__esModule?t.default:t}var e,s=globalThis,o={},a={},r=s.parcelRequire5cc2;null==r&&((r=function(t){if(t in o)return o[t].exports;if(t in a){var i=a[t];delete a[t];var e={id:t,exports:{}};return o[t]=e,i.call(e.exports,e,e.exports),e.exports}var s=Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,i){a[t]=i},s.parcelRequire5cc2=r);var n=r.register;n("iyjrR",function(t,i){t.exports=import("8BShk").then(()=>r("jaZ7o"))}),n("8ZFBQ",function(t,i){t.exports=import("ilUZb").then(()=>r("6fGU3"))});const p={en:{"Enter names below":"Enter names below",Shuffle:"Shuffle",Start:"Start",Map:"Map","The winner is":"The winner is","Using skills":"Using skills","Buy me a coffee":"Buy me a coffee",First:"First",Last:"Last","Wheel of fortune":"Wheel of fortune",BubblePop:"BubblePop","Pot of greed":"Pot of greed","Yoru ni Kakeru":"Into The Night (by item4)","Shake!":"Shake!","Input names separated by commas or line feed here":"Input names separated by commas or line feed here","This program is freeware and may be used freely anywhere, including in broadcasts and videos.":"This program is freeware and may be used freely anywhere, including in broadcasts and videos.",Close:"Close","The result has been copied":"The result has been copied"},ko:{"Enter names below":"이름들을 입력하세요",Shuffle:"섞기",Start:"시작",Map:"맵","The winner is":"당첨 순위","Using skills":"스킬 활성화","Buy me a coffee":"개발자에게 커피 사주기",First:"첫번째",Last:"마지막","Wheel of fortune":"운명의 수레바퀴",BubblePop:"버블팝","Pot of greed":"욕망의 항아리","Yoru ni Kakeru":"밤을 달리다 (by item4)","Shake!":"흔들기!","Input names separated by commas or line feed here":"이름들을 쉼표나 엔터로 구분해서 넣어주세요","This program is freeware and may be used freely anywhere, including in broadcasts and videos.":"이 프로그램은 프리웨어이며 방송이나 영상 등을 포함한 어떤 용도로든 자유롭게 사용하는 것이 허용되어있습니다.",Close:"닫기","The result has been copied":"결과가 복사되었습니다"}};function l(i){if(!(i instanceof HTMLElement)||!t)return;let e=i.getAttribute("data-trans");if(e){let s=(i.getAttribute(e)||"").trim();s&&s in p[t]&&i.setAttribute(e,p[t][s])}else{let e=i.innerText.trim();e&&e in p[t]&&(i.innerText=p[t][e])}}function y(t,i,e,s){var o,a=arguments.length,r=a<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,e,s);else for(var n=t.length-1;n>=0;n--)(o=t[n])&&(r=(a<3?o(r):a>3?o(i,e,r):o(i,e))||r);return a>3&&r&&Object.defineProperty(i,e,r),r}document.addEventListener("DOMContentLoaded",()=>{console.log("localization loaded");let i=navigator.language.split("-")[0];console.log("detected locale: ",i),function(i){if(i===t)return;document.documentElement.lang=i;let e=i.toLocaleLowerCase();t=e in p?e:"en",document.querySelectorAll("[data-trans]").forEach(l)}(i)}),window.translateElement=l,"function"==typeof SuppressedError&&SuppressedError;var c=((e={})[e.None=0]="None",e[e.Impact=1]="Impact",e);const h={light:{background:"#eee",marbleLightness:50,marbleWinningBorder:"black",skillColor:"#69c",coolTimeIndicator:"#999",entity:{box:{fill:"#226f92",outline:"black",bloom:"cyan",bloomRadius:0},circle:{fill:"yellow",outline:"#ed7e11",bloom:"yellow",bloomRadius:0},polyline:{fill:"white",outline:"black",bloom:"cyan",bloomRadius:0}},rankStroke:"black",minimapBackground:"#fefefe",minimapViewport:"#6699cc",winnerBackground:"rgba(255, 255, 255, 0.5)",winnerOutline:"black",winnerText:"#cccccc"},dark:{background:"black",marbleLightness:75,marbleWinningBorder:"white",skillColor:"white",coolTimeIndicator:"red",entity:{box:{fill:"cyan",outline:"cyan",bloom:"cyan",bloomRadius:15},circle:{fill:"yellow",outline:"yellow",bloom:"yellow",bloomRadius:15},polyline:{fill:"white",outline:"white",bloom:"cyan",bloomRadius:15}},rankStroke:"",minimapBackground:"#333333",minimapViewport:"white",winnerBackground:"rgba(0, 0, 0, 0.5)",winnerOutline:"black",winnerText:"white"},christmas:{background:"#0a1628",backgroundGradient:["#0a1628","#1a2f4a","#2d4563"],marbleLightness:60,marbleWinningBorder:"#FFD700",skillColor:"#FF6B6B",coolTimeIndicator:"#50C878",entity:{box:{fill:"#C41E3A",outline:"#FFD700",bloom:"#FF6B6B",bloomRadius:20},circle:{fill:"#50C878",outline:"#FFD700",bloom:"#90EE90",bloomRadius:20},polyline:{fill:"#4169E1",outline:"#B0C4DE",bloom:"#87CEEB",bloomRadius:15}},rankStroke:"#FFD700",minimapBackground:"rgba(10, 22, 40, 0.7)",minimapViewport:"#FFD700",winnerBackground:"rgba(196, 30, 58, 0.3)",winnerOutline:"#FFD700",winnerText:"#FFFFFF",glassBlur:10,glassOpacity:.2,accentGlow:"#FFD700",snowColor:"#FFFFFF"}};function u(t){return Math.PI*t/180}function d(t,i){let e=t.exec(i);return e?e[1]:""}const g=new class{constructor(){this.useSkills=!0,this.winningRank=0,this.winningRanks=[0]}};class x{static sub(t,i){return{x:i.x-t.x,y:i.y-t.y}}static lenSq(t){return t.x*t.x+t.y*t.y}static len(t){return Math.sqrt(this.lenSq(t))}static mul(t,i){return{x:t.x*i,y:t.y*i}}static add(t,i){return{x:t.x+i.x,y:t.y+i.y}}}function f(t,i){let e=t.getTransform();i(t),t.setTransform(e)}class b{get position(){return this.physics.getMarblePosition(this.id)||{x:0,y:0,angle:0}}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get angle(){return this.position.angle}constructor(t,i,e,s,o=1){this.type="marble",this.name="",this.size=.5,this.color="red",this.hue=0,this.impact=0,this.weight=1,this.skill=c.None,this.isActive=!1,this._skillRate=5e-4,this._coolTime=5e3,this._maxCoolTime=5e3,this._stuckTime=0,this.lastPosition={x:0,y:0},this.theme=h.dark,this.floatOffset=0,this.floatPhase=Math.random()*Math.PI*2,this.name=s||`M${i}`,this.weight=o,this.physics=t,this._maxCoolTime=1e3+(1-this.weight)*4e3,this._coolTime=this._maxCoolTime*Math.random(),this._skillRate=.2*this.weight;let a=Math.ceil(e/10),r=Math.floor(i/10),n=-Math.max(0,Math.ceil(a-5));this.hue=360/e*i,this.color=`hsl(${this.hue} 100% 70%)`,this.id=i,t.createMarble(i,10.25+i%10*.6,a-r+n)}update(t){this.isActive&&1e-5>x.lenSq(x.sub(this.lastPosition,this.position))?(this._stuckTime+=t,this._stuckTime>4e3&&(this.physics.shakeMarble(this.id),this._stuckTime=0)):this._stuckTime=0,this.lastPosition={x:this.position.x,y:this.position.y},this.skill=c.None,this.impact&&(this.impact=Math.max(0,this.impact-t)),this.isActive?(this.floatOffset=0,g.useSkills&&this._updateSkillInformation(t)):(this.floatPhase+=t/1e3,this.floatOffset=.05*Math.sin(2*this.floatPhase))}_updateSkillInformation(t){this._coolTime>0&&(this._coolTime-=t),this._coolTime<=0&&(this.skill=Math.random()<this._skillRate?c.Impact:c.None,this._coolTime=this._maxCoolTime)}render(t,i,e,s=!1,o,a,r){this.theme=r;let n=a.w/a.zoom/2,p=a.h/a.zoom/2,l=a.x-n,y=a.x+n,c=a.y-p-this.size/2,h=a.y+p;if(!s&&(this.x<l||this.x>y||this.y<c||this.y>h))return;let u=t.getTransform();s?this._renderMinimap(t):this._renderNormal(t,i,e,o),t.setTransform(u)}_renderMinimap(t){t.fillStyle=this.color,this._drawMarbleBody(t,!0)}_drawMarbleBody(t,i){let e=i?this.size:this.size/2,s=this.y+this.floatOffset;i?(t.beginPath(),t.arc(this.x,s,e,0,2*Math.PI),t.fill()):this._drawOrnament(t,e,s)}_drawOrnament(t,i,e){let s=t.createRadialGradient(this.x-.3*i,e-.3*i,.1*i,this.x,e,i);s.addColorStop(0,`hsl(${this.hue} 100% 85%)`),s.addColorStop(.5,`hsl(${this.hue} 100% ${this.theme.marbleLightness}%)`),s.addColorStop(1,`hsl(${this.hue} 80% 35%)`),t.fillStyle=s,t.beginPath(),t.arc(this.x,e,i,0,2*Math.PI),t.fill();let o=.3*i;t.fillStyle="#C9B037",t.beginPath(),t.arc(this.x,e-i,.2*i,0,2*Math.PI),t.fill(),t.strokeStyle="#C9B037",t.lineWidth=.1*i,t.beginPath(),t.moveTo(this.x,e-i),t.lineTo(this.x,e-i-o),t.stroke(),t.fillStyle="rgba(255, 255, 255, 0.6)",t.beginPath(),t.ellipse(this.x-.3*i,e-.3*i,.3*i,.4*i,-Math.PI/4,0,2*Math.PI),t.fill()}_renderNormal(t,i,e,s){let o=this.size/2;t.fillStyle=`hsl(${this.hue} 100% ${this.theme.marbleLightness+25*Math.min(1,this.impact/500)}%`,s?f(t,()=>{t.translate(this.x,this.y),t.rotate(this.angle),t.drawImage(s,-o,-o,2*o,2*o)}):this._drawMarbleBody(t,!1),t.shadowColor="",t.shadowBlur=0,this._drawName(t,i),e&&this._drawOutline(t,2/i),g.useSkills&&this._renderCoolTime(t,i)}_drawName(t,i){let e=this.y+this.floatOffset;f(t,()=>{t.font="bold 26pt sans-serif",t.strokeStyle="black",t.lineWidth=3,t.fillStyle=this.color,t.shadowBlur=0,t.translate(this.x,e+.25),t.scale(1/i,1/i),t.strokeText(this.name,0,0),t.fillText(this.name,0,0)})}_drawOutline(t,i){let e=this.y+this.floatOffset;t.beginPath(),t.strokeStyle=this.theme.marbleWinningBorder,t.lineWidth=i,t.arc(this.x,e,this.size/2,0,2*Math.PI),t.stroke()}_renderCoolTime(t,i){let e=this.y+this.floatOffset;t.strokeStyle=this.theme.coolTimeIndicator,t.lineWidth=1/i,t.beginPath(),t.arc(this.x,e,this.size/2+2/i,u(270),u(270+360*this._coolTime/this._maxCoolTime)),t.stroke()}}class m{constructor(t,i,e=!0){this._elapsed=0,this.position={x:0,y:0},this.force={x:0,y:0},this.color="",this.isDestroy=!1,this.rotation=0,this.rotationSpeed=0,this.isStar=!1,this.position.x=t,this.position.y=i;let s=250*Math.random(),o=u(90*Math.random()-180),a=Math.cos(o)*s,r=Math.sin(o)*s;if(e){let t=["hsl(0, 80%, 50%)","hsl(140, 60%, 50%)","hsl(45, 100%, 50%)","hsl(0, 0%, 95%)","hsl(210, 100%, 60%)"];this.color=t[Math.floor(Math.random()*t.length)]}else this.color=`hsl(${360*Math.random()} 50% 50%)`;this.force={x:a,y:r},this.rotation=Math.random()*Math.PI*2,this.rotationSpeed=(Math.random()-.5)*.2,this.isStar=Math.random()>.5}update(t){this._elapsed+=t;let i=x.mul(this.force,t/100);this.position=x.add(this.position,i),this.force.y+=10*t/100,this.rotation+=this.rotationSpeed,this._elapsed>3e3&&(this.isDestroy=!0)}render(t){if(t.save(),t.globalAlpha=1-Math.pow(this._elapsed/3e3,2),t.translate(this.position.x,this.position.y),t.rotate(this.rotation),t.fillStyle=this.color,this.isStar){t.beginPath();for(let i=0;i<5;i++){let e=2*Math.PI/5*i-Math.PI/2,s=10*Math.cos(e),o=10*Math.sin(e);0===i?t.moveTo(s,o):t.lineTo(s,o)}t.closePath(),t.fill()}else t.fillRect(-10,-10,20,20);t.restore()}}class w{constructor(t,i,e,s){this.position={x:t,y:i},this.canvasWidth=e,this.canvasHeight=s,this.size=4*Math.random()+2,this.velocity={x:0,y:50*Math.random()+25},this.drift=20*Math.random()-10,this.opacity=.6*Math.random()+.4}update(t){let i=t/1e3;this.position.y+=this.velocity.y*i,this.position.x+=Math.sin(this.position.y/30)*this.drift*i,this.position.y>this.canvasHeight&&(this.position.y=-10,this.position.x=Math.random()*this.canvasWidth)}render(t){t.save(),t.globalAlpha=this.opacity,t.fillStyle="#FFFFFF",t.beginPath();for(let i=0;i<6;i++){let e=Math.PI/3*i,s=this.position.x+Math.cos(e)*this.size,o=this.position.y+Math.sin(e)*this.size;0===i?t.moveTo(s,o):t.lineTo(s,o)}t.closePath(),t.fill(),t.restore()}}class V{enableSnow(t,i){this._isSnowing=!0,this._snowParticles=[];let e=Math.floor(26*Math.random())+50;for(let s=0;s<e;s++)this._snowParticles.push(new w(Math.random()*t,Math.random()*i,t,i))}disableSnow(){this._isSnowing=!1,this._snowParticles=[]}update(t){this._particles.forEach(i=>{i.update(t)}),this._particles=this._particles.filter(t=>!t.isDestroy),this._isSnowing&&this._snowParticles.forEach(i=>{i.update(t)})}render(t){this._isSnowing&&this._snowParticles.forEach(i=>i.render(t)),this._particles.forEach(i=>i.render(t))}shot(t,i){for(let e=0;e<200;e++)this._particles.push(new m(t,i))}constructor(){this._particles=[],this._snowParticles=[],this._isSnowing=!1}}const _=[{title:"Wheel of fortune",goalY:111,zoomY:106.75,entities:[{position:{x:0,y:0},shape:{type:"polyline",points:[[16.5,-300],[9.25,-300],[9.25,8.5],[2,19.25],[2,26],[9.75,30],[9.75,33.5],[1.25,41],[1.25,53.75],[8.25,58.75],[8.25,63],[9.25,64],[8.25,65],[8.25,99.25],[15.1,106.75],[15.1,111.75]],rotation:0},type:"static",props:{density:1,angularVelocity:0,restitution:0}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[16.5,-300],[16.5,9.25],[9.5,20],[9.5,22.5],[17.5,26],[17.5,33.5],[24,38.5],[19,45.5],[19,55.5],[24,59.25],[24,63],[23,64],[24,65],[24,100.5],[16,106.75],[16,111.75]]}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[12.75,37.5],[7,43.5],[7,49.75],[12.75,53.75],[12.75,37.5]]}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[14.75,37.5],[14.75,43],[17.5,40.25],[14.75,37.5]]}},{position:{x:15.5,y:30},shape:{type:"box",width:.2,height:.2,rotation:-45},type:"static",props:{density:1,angularVelocity:0,restitution:1}},{position:{x:15.5,y:32},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:15.5,y:28},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:12.5,y:30},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:12.5,y:32},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:12.5,y:28},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:9.4,y:66.6},type:"static",shape:{type:"box",width:.6,height:.1,rotation:45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:11.3,y:66.6},type:"static",shape:{type:"box",width:.6,height:.1,rotation:45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:13.2,y:66.6},type:"static",shape:{type:"box",width:.6,height:.1,rotation:45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:15.1,y:66.6},type:"static",shape:{type:"box",width:.6,height:.1,rotation:45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:17,y:66.6},type:"static",shape:{type:"box",width:.6,height:.1,rotation:45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:18.9,y:66.6},type:"static",shape:{type:"box",width:.6,height:.1,rotation:45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:20.699999999999996,y:66.6},type:"static",shape:{type:"box",width:.6,height:.1,rotation:45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:22.7,y:66.6},type:"static",shape:{type:"box",width:.6,height:.1,rotation:45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:9.4,y:69.1},type:"static",shape:{type:"box",width:.6,height:.1,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:11.3,y:69.1},type:"static",shape:{type:"box",width:.6,height:.1,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:13.2,y:69.1},type:"static",shape:{type:"box",width:.6,height:.1,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:15.1,y:69.1},type:"static",shape:{type:"box",width:.6,height:.1,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:17,y:69.1},type:"static",shape:{type:"box",width:.6,height:.1,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:18.9,y:69.1},type:"static",shape:{type:"box",width:.6,height:.1,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:20.699999999999996,y:69.1},type:"static",shape:{type:"box",width:.6,height:.1,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:22.7,y:69.1},type:"static",shape:{type:"box",width:.6,height:.1,rotation:-45},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:9.5,y:92},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:12.75,y:92},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:16,y:92},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:19.25,y:92},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:22.5,y:92},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:11,y:95},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:14.25,y:95},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:17.5,y:95},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:20.75,y:95},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:9.5,y:98},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:12.75,y:98},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:16,y:98},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:19.25,y:98},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:22.5,y:98},type:"static",shape:{type:"box",width:.25,height:.25,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:8,y:75},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:3.5,restitution:0}},{position:{x:12,y:75},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-3.5,restitution:0}},{position:{x:16,y:75},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:3.5,restitution:0}},{position:{x:20,y:75},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-3.5,restitution:0}},{position:{x:24,y:75},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:3.5,restitution:0}},{position:{x:14,y:106.75},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-1.2,restitution:0}}]},{title:"BubblePop",goalY:83,zoomY:78,entities:[{type:"static",position:{x:10.375,y:-108.5},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[6.125,-191.5],[-1.125,-191.5],[-1.125,108.5],[-1.125,151.5],[-6.125,158.5],[-1.125,161.5],[-1.125,179.5],[-.9128679656440362,179.7498817789222],[-1.125,179.9997635578444],[-1.125,183.5],[1.625,188.5],[1.625,191.5]]}},{type:"static",position:{x:16.25,y:-108.5},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[.25,-191.5],[.25,158.5],[3.25,162.5],[2.25,164.5],[3.25,166.5],[.25,169.5],[.25,179.5],[.03786796564403616,179.75925677892224],[.25,179.9997635578444],[.25,183.5],[-3.25,188.5],[-3.25,191.5]]}},{type:"static",position:{x:16.5,y:55.75},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[0,-3.25],[1,-1.75],[0,.25],[1,2.25],[0,3.25],[-1,.25],[0,-3.25]]}},{type:"static",position:{x:10.375,y:48.25},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[-1.125,-2.75],[-4.125,1.25],[-1.125,2.75],[4.125,2.25],[-1.125,-2.75]]}},{type:"static",position:{x:10.15625,y:26.75},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[-.90625,-.75],[.90625,.75]]}},{type:"static",position:{x:15.59375,y:26.75},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[.90625,-.75],[-.90625,.75]]}},{type:"static",position:{x:12.875,y:29.25},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[-1.8125,.75],[0,-.75],[1.8125,.75]]}},{type:"static",position:{x:10.15625,y:31.75},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[-.90625,-.75],[.90625,.75]]}},{type:"static",position:{x:15.59375,y:31.75},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[.90625,-.75],[-.90625,.75]]}},{type:"static",position:{x:12.875,y:34.25},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"polyline",rotation:0,points:[[-1.8125,.75],[0,-.75],[1.8125,.75]]}},{type:"static",position:{x:9.25,y:18},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:11.25,y:18},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:13.25,y:18},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:15.25,y:18},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:10.5,y:19},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:12.5,y:19},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:14.5,y:19},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:16.5,y:19},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:9.25,y:20},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:11.25,y:20},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:13.25,y:20},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:15.25,y:20},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:10.5,y:21},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:12.5,y:21},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:14.5,y:21},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:16.5,y:21},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:9.25,y:22},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:11.25,y:22},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:13.25,y:22},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:15.25,y:22},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:10.5,y:23},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:12.5,y:23},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:14.5,y:23},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:16.5,y:23},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:.15,height:.15}},{type:"static",position:{x:9.400000000000002,y:39},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:3,height:3}},{type:"static",position:{x:16.5,y:43},props:{angularVelocity:0,density:1,restitution:0},shape:{type:"box",rotation:.7853981633974483,width:3,height:3}},{type:"kinematic",position:{x:10.7,y:10},props:{angularVelocity:10,density:1,restitution:0},shape:{type:"box",rotation:0,width:.5,height:.1}},{type:"kinematic",position:{x:14.7,y:10},props:{angularVelocity:-10,density:1,restitution:0},shape:{type:"box",rotation:0,width:.5,height:.1}},{type:"kinematic",position:{x:12.7,y:10},props:{angularVelocity:10,density:1,restitution:0},shape:{type:"box",rotation:0,width:.5,height:.1}},{type:"kinematic",position:{x:10.7,y:14},props:{angularVelocity:-3,density:1,restitution:0},shape:{type:"box",rotation:0,width:2,height:.1}},{type:"kinematic",position:{x:14.7,y:14},props:{angularVelocity:3,density:1,restitution:0},shape:{type:"box",rotation:0,width:2,height:.1}},{type:"kinematic",position:{x:11.2,y:44},props:{angularVelocity:-5,density:1,restitution:0},shape:{type:"box",rotation:0,width:.5,height:.1}},{type:"kinematic",position:{x:10.3,y:75},props:{angularVelocity:8,density:1,restitution:0},shape:{type:"box",rotation:0,width:1,height:.1}},{type:"kinematic",position:{x:15.462132034355964,y:75},props:{angularVelocity:-8,density:1,restitution:0},shape:{type:"box",rotation:0,width:1,height:.1}},{type:"static",position:{x:11,y:65},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.5}},{type:"static",position:{x:13,y:65},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.5}},{type:"static",position:{x:15,y:65},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.5}},{type:"static",position:{x:12,y:67.5},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.5}},{type:"static",position:{x:14,y:67.5},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.5}},{type:"static",position:{x:13,y:69.77058813837772},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.8}},{type:"static",position:{x:10.7,y:77.5},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.8}},{type:"static",position:{x:14.7,y:77.5},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.8}},{type:"static",position:{x:12.625,y:80},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:1.5}},{type:"static",position:{x:12.625,y:80},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:1.2}},{type:"kinematic",position:{x:12.625,y:56.00000000000001},props:{angularVelocity:-8,density:1,restitution:0},shape:{type:"box",rotation:0,width:1,height:.1}},{type:"static",position:{x:9.947604593262161,y:62.59581680393866},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.5}},{type:"static",position:{x:11.947604593262161,y:62.59581680393866},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.5}},{type:"static",position:{x:13.947604593262161,y:62.59581680393866},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.5}},{type:"static",position:{x:15.828283102570442,y:62.59581680393866},props:{angularVelocity:0,density:1,restitution:1.5,life:1},shape:{type:"circle",radius:.5}}]},{title:"Pot of greed",goalY:111,zoomY:110,entities:[{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[17,-300],[9,-300],[9,8.5],[2,15],[6,61.5]]}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[7,71],[9,101],[8,100.5],[6,100],[5,90],[4,70],[7,71]]}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[17,-300],[17,8.5],[24,15],[20,61.5]]}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[19,71],[17,101],[18,100.5],[20,100],[21,90],[22,70],[19,71]]}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[11,88],[12,90],[12,112]]}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[15,88],[14,90],[14,112]]}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[12,102],[11,103],[9,104],[8,104],[6,103],[5,102],[4,100],[3,90],[2,70],[3,65],[4,63],[5,62],[6,61.5]]}},{type:"static",position:{x:0,y:0},props:{density:1,angularVelocity:0,restitution:0},shape:{type:"polyline",rotation:0,points:[[14,102],[15,103],[17,104],[18,104],[20,103],[21,102],[22,100],[23,90],[24,70],[23,65],[22,63],[21,62],[20,61.5]]}},{position:{x:13,y:20},type:"static",shape:{type:"box",width:3,height:3,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:13,y:55},type:"static",shape:{type:"box",width:3,height:3,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:8,y:37},type:"static",shape:{type:"box",width:2,height:2,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:18,y:37},type:"static",shape:{type:"box",width:2,height:2,rotation:.7853981633974483},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:11,y:12},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-3,restitution:0}},{position:{x:15,y:12},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:3,restitution:0}},{position:{x:8,y:104},type:"kinematic",shape:{type:"box",width:1,height:.1,rotation:0},props:{density:1,angularVelocity:-10,restitution:0}},{position:{x:6,y:103},type:"kinematic",shape:{type:"box",width:1.5,height:.1,rotation:0},props:{density:1,angularVelocity:-10,restitution:0}},{position:{x:4,y:100},type:"kinematic",shape:{type:"box",width:1.5,height:.1,rotation:0},props:{density:1,angularVelocity:-10,restitution:0}},{position:{x:3.5,y:95},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-10,restitution:0}},{position:{x:3,y:90},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-10,restitution:0}},{position:{x:2.75,y:85},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-10,restitution:0}},{position:{x:2.5,y:80},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-10,restitution:0}},{position:{x:2.25,y:75},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-10,restitution:0}},{position:{x:2,y:70},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:-10,restitution:0}},{position:{x:18,y:104},type:"kinematic",shape:{type:"box",width:1,height:.1,rotation:0},props:{density:1,angularVelocity:10,restitution:0}},{position:{x:20,y:103},type:"kinematic",shape:{type:"box",width:1.5,height:.1,rotation:0},props:{density:1,angularVelocity:10,restitution:0}},{position:{x:22,y:100},type:"kinematic",shape:{type:"box",width:1.5,height:.1,rotation:0},props:{density:1,angularVelocity:10,restitution:0}},{position:{x:22.5,y:95},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:10,restitution:0}},{position:{x:23,y:90},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:10,restitution:0}},{position:{x:23.25,y:85},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:10,restitution:0}},{position:{x:23.5,y:80},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:10,restitution:0}},{position:{x:23.75,y:75},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:10,restitution:0}},{position:{x:24,y:70},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0},props:{density:1,angularVelocity:10,restitution:0}}]},{title:"Yoru ni Kakeru",goalY:248,zoomY:234.5,entities:[{position:{x:2,y:0},shape:{type:"box",width:1,height:800,rotation:0,color:"#222",bloomColor:"#777"},type:"static",props:{density:500,angularVelocity:0,restitution:0}},{type:"static",position:{x:21,y:0},props:{density:500,angularVelocity:0,restitution:0},shape:{type:"box",rotation:0,width:1,height:800,color:"#222",bloomColor:"#777"}},{position:{x:4,y:25},shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},type:"static",props:{density:1,angularVelocity:0,restitution:1}},{position:{x:4,y:30},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:4,y:35},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:4,y:40},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:9,y:25},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:9,y:30},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:9,y:35},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:9,y:40},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:14,y:25},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:14,y:30},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:14,y:35},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:14,y:40},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:19,y:25},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:19,y:30},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:19,y:35},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:19,y:40},type:"static",shape:{type:"box",width:.2,height:.2,rotation:-45,color:"#818fb4"},props:{density:1,angularVelocity:0,restitution:0}},{position:{x:6.5,y:27.5},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0,color:"#9bec00"},props:{density:1,angularVelocity:2,restitution:0}},{position:{x:6.5,y:37.5},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0,color:"#ff6868"},props:{density:1,angularVelocity:2,restitution:0}},{position:{x:11.5,y:32.5},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0,color:"#80b3ff"},props:{density:2,angularVelocity:4,restitution:0}},{position:{x:16.5,y:27.5},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0,color:"#ff6868"},props:{density:1,angularVelocity:-2,restitution:0}},{position:{x:16.5,y:37.5},type:"kinematic",shape:{type:"box",width:2,height:.1,rotation:0,color:"#9bec00"},props:{density:1,angularVelocity:-2,restitution:0}},{position:{x:10,y:26},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:26},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:13,y:26},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:10,y:27.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:27.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:13,y:27.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:10,y:29},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:29},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:13,y:29},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:5,y:31},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:31},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:8,y:31},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:5,y:32.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:32.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:8,y:32.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:5,y:34},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:34},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:8,y:34},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:15,y:31},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:31},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:18,y:31},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:15,y:32.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:32.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:18,y:32.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:15,y:34},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:34},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:18,y:34},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:10,y:36},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:36},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:13,y:36},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:10,y:37.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:37.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:13,y:37.5},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:10,y:39},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:39},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:13,y:39},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:50},type:"kinematic",shape:{type:"box",width:6.5,height:.1,rotation:0,color:"#5c5470"},props:{density:1,angularVelocity:-2,restitution:0}},{position:{x:3.5,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:5,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:8,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:9.5,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:12.5,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:14,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:15.5,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:17,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:18.5,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:20,y:60},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:3,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:6,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:7.5,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:9,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:10.5,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:12,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:13.5,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:15,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:18,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:63},type:"static",shape:{type:"circle",radius:.5,color:"#ffe227"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:3.5,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:5,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:8,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:9.5,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:12.5,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:14,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:15.5,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:17,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:18.5,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:20,y:66},type:"static",shape:{type:"circle",radius:.5,color:"#fff4b7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:75},type:"kinematic",shape:{type:"box",width:4,height:.1,rotation:0,color:"#ff577f"},props:{density:1,angularVelocity:-4,restitution:0}},{position:{x:18.5,y:75},type:"kinematic",shape:{type:"box",width:4,height:.1,rotation:0,color:"#ff577f"},props:{density:1,angularVelocity:4,restitution:0}},{position:{x:3.8,y:90},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1,restitution:0}},{position:{x:19.2,y:90},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1,restitution:0}},{position:{x:5.8,y:92},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.2,restitution:0}},{position:{x:17.2,y:92},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.2,restitution:0}},{position:{x:7.8,y:94},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.4,restitution:0}},{position:{x:15.2,y:94},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.4,restitution:0}},{position:{x:9.8,y:96},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.6,restitution:0}},{position:{x:13.2,y:96},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.6,restitution:0}},{position:{x:3.8,y:94},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.2,restitution:0}},{position:{x:19.2,y:94},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.2,restitution:0}},{position:{x:5.8,y:96},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.4,restitution:0}},{position:{x:17.2,y:96},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.4,restitution:0}},{position:{x:7.8,y:98},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.6,restitution:0}},{position:{x:15.2,y:98},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.6,restitution:0}},{position:{x:9.8,y:100},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.8,restitution:0}},{position:{x:13.2,y:100},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.8,restitution:0}},{position:{x:10,y:90},type:"static",shape:{type:"circle",radius:.5,color:"#ffe3fe"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:12,y:90},type:"static",shape:{type:"circle",radius:.5,color:"#ffe3fe"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:8,y:92},type:"static",shape:{type:"circle",radius:.5,color:"#ffe3fe"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:14,y:92},type:"static",shape:{type:"circle",radius:.5,color:"#ffe3fe"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:6,y:94},type:"static",shape:{type:"circle",radius:.5,color:"#ffe3fe"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:16,y:94},type:"static",shape:{type:"circle",radius:.5,color:"#ffe3fe"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:4,y:96},type:"static",shape:{type:"circle",radius:.5,color:"#ffe3fe"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:18,y:96},type:"static",shape:{type:"circle",radius:.5,color:"#ffe3fe"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:10,y:94},type:"static",shape:{type:"circle",radius:.5,color:"#ff94cc"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:12,y:94},type:"static",shape:{type:"circle",radius:.5,color:"#ff94cc"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:8,y:96},type:"static",shape:{type:"circle",radius:.5,color:"#ff94cc"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:14,y:96},type:"static",shape:{type:"circle",radius:.5,color:"#ff94cc"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:6,y:98},type:"static",shape:{type:"circle",radius:.5,color:"#ff94cc"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:16,y:98},type:"static",shape:{type:"circle",radius:.5,color:"#ff94cc"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:4,y:100},type:"static",shape:{type:"circle",radius:.5,color:"#ff94cc"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:18,y:100},type:"static",shape:{type:"circle",radius:.5,color:"#ff94cc"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:100},type:"kinematic",shape:{type:"box",width:5,height:.1,rotation:0,color:"#5c8374"},props:{density:1,angularVelocity:-2.5,restitution:0}},{position:{x:18.5,y:100},type:"kinematic",shape:{type:"box",width:5,height:.1,rotation:0,color:"#5c8374"},props:{density:1,angularVelocity:2.5,restitution:0}},{position:{x:3.8,y:104},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.4,restitution:0}},{position:{x:19.2,y:104},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.4,restitution:0}},{position:{x:5.8,y:106},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.6,restitution:0}},{position:{x:17.2,y:106},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.6,restitution:0}},{position:{x:7.8,y:108},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.8,restitution:0}},{position:{x:15.2,y:108},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:1.8,restitution:0}},{position:{x:9.8,y:110},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:2,restitution:0}},{position:{x:13.2,y:110},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#c7ffd8"},props:{density:1,angularVelocity:2,restitution:0}},{position:{x:3.8,y:108},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.6,restitution:0}},{position:{x:19.2,y:108},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.6,restitution:0}},{position:{x:5.8,y:110},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.8,restitution:0}},{position:{x:17.2,y:110},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:1.8,restitution:0}},{position:{x:7.8,y:112},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:2,restitution:0}},{position:{x:15.2,y:112},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:2,restitution:0}},{position:{x:9.8,y:114},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:2.2,restitution:0}},{position:{x:13.2,y:114},type:"static",shape:{type:"box",width:.1,height:.1,rotation:-90,color:"#98ded9"},props:{density:1,angularVelocity:2.2,restitution:0}},{position:{x:3.5,y:105},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:105},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:3.5,y:107},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:107},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:5.5,y:107},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:17.5,y:107},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:3.5,y:109},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:109},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:5.5,y:109},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:17.5,y:109},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:7.5,y:109},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:15.5,y:109},type:"static",shape:{type:"circle",radius:.5,color:"#edeef7"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:5.5,y:115},type:"static",shape:{type:"circle",radius:.4,color:"#e6176d"},props:{angularVelocity:0,density:1,restitution:1.5,life:5}},{position:{x:17.5,y:115},type:"static",shape:{type:"circle",radius:.4,color:"#e6176d"},props:{angularVelocity:0,density:1,restitution:1.5,life:5}},{position:{x:5.5,y:115},type:"static",shape:{type:"circle",radius:1.2,color:"#e64588"},props:{angularVelocity:0,density:1,restitution:1.5,life:4}},{position:{x:17.5,y:115},type:"static",shape:{type:"circle",radius:1.2,color:"#e64588"},props:{angularVelocity:0,density:1,restitution:1.5,life:4}},{position:{x:5.5,y:115},type:"static",shape:{type:"circle",radius:2,color:"#e673a3"},props:{angularVelocity:0,density:1,restitution:1.5,life:3}},{position:{x:17.5,y:115},type:"static",shape:{type:"circle",radius:2,color:"#e673a3"},props:{angularVelocity:0,density:1,restitution:1.5,life:3}},{position:{x:5.5,y:115},type:"static",shape:{type:"circle",radius:2.8,color:"#e6a1bd"},props:{angularVelocity:0,density:1,restitution:1.5,life:2}},{position:{x:17.5,y:115},type:"static",shape:{type:"circle",radius:2.8,color:"#e6a1bd"},props:{angularVelocity:0,density:1,restitution:1.5,life:2}},{position:{x:5.5,y:115},type:"static",shape:{type:"circle",radius:3.8,color:"#e6cfd8"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:17.5,y:115},type:"static",shape:{type:"circle",radius:3.8,color:"#e6cfd8"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:120},type:"static",shape:{type:"circle",radius:.4,color:"#e6176d"},props:{angularVelocity:0,density:1,restitution:1.5,life:5}},{position:{x:11.5,y:120},type:"static",shape:{type:"circle",radius:1.2,color:"#e64588"},props:{angularVelocity:0,density:1,restitution:1.5,life:4}},{position:{x:11.5,y:120},type:"static",shape:{type:"circle",radius:2,color:"#e673a3"},props:{angularVelocity:0,density:1,restitution:1.5,life:3}},{position:{x:11.5,y:120},type:"static",shape:{type:"circle",radius:2.8,color:"#e6a1bd"},props:{angularVelocity:0,density:1,restitution:1.5,life:2}},{position:{x:11.5,y:120},type:"static",shape:{type:"circle",radius:3.8,color:"#e6cfd8"},props:{angularVelocity:0,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:130},type:"kinematic",shape:{type:"box",width:5,height:.1,rotation:0,color:"#435585"},props:{density:1,angularVelocity:.25,restitution:0}},{position:{x:18.5,y:130},type:"kinematic",shape:{type:"box",width:5,height:.1,rotation:0,color:"#5c8374"},props:{density:1,angularVelocity:-.32,restitution:0}},{position:{x:4.5,y:140},type:"kinematic",shape:{type:"box",width:4,height:.1,rotation:30,color:"#610c9f"},props:{density:1,angularVelocity:.32,restitution:0}},{position:{x:18.5,y:140},type:"kinematic",shape:{type:"box",width:4,height:.1,rotation:-30,color:"#872341"},props:{density:1,angularVelocity:-.32,restitution:0}},{position:{x:4.5,y:150},type:"kinematic",shape:{type:"box",width:5,height:.1,rotation:60,color:"#503c3c"},props:{density:1,angularVelocity:.32,restitution:0}},{position:{x:18.5,y:150},type:"kinematic",shape:{type:"box",width:5,height:.1,rotation:-60,color:"#5c5470"},props:{density:1,angularVelocity:-.32,restitution:0}},{position:{x:4.5,y:160},type:"kinematic",shape:{type:"box",width:4,height:.1,rotation:90,color:"#1a3636"},props:{density:1,angularVelocity:.32,restitution:0}},{position:{x:18.5,y:160},type:"kinematic",shape:{type:"box",width:4,height:.1,rotation:-90,color:"#522258"},props:{density:1,angularVelocity:-.32,restitution:0}},{position:{x:3.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:5.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:7.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:8.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:9.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:10.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:12.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:13.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:14.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:15.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:17.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:18.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:135},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:3.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:5.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:7.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:8.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:9.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:10.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:12.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:13.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:14.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:15.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:17.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:18.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:140},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:3.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:5.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:7.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:8.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:9.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:10.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:12.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:13.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:14.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:15.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:17.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:18.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:144},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:3.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:5.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:7.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:8.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:9.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:10.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:12.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:13.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:14.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:15.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:17.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:18.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:147},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:3.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:5.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:7.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:8.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:9.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:10.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:12.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:13.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:14.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:15.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:17.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:18.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:149},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:3.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:5.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:6.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:7.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:8.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:9.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:10.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:11.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:12.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:13.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:14.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:15.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:16.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:17.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:18.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:19.5,y:150},type:"static",shape:{type:"circle",radius:.2,color:"#e6e1ae"},props:{angularVelocity:1,density:1,restitution:1.5,life:1}},{position:{x:4.5,y:180},type:"kinematic",shape:{type:"box",width:6,height:.1,rotation:0,color:"#ccb1b1"},props:{density:1,angularVelocity:4.6,restitution:0}},{position:{x:18.5,y:180},type:"kinematic",shape:{type:"box",width:7,height:.1,rotation:0,color:"#b1ccb1"},props:{density:1,angularVelocity:-4,restitution:0}},{position:{x:11.5,y:195},type:"kinematic",shape:{type:"box",width:8,height:.1,rotation:0,color:"#b3ccff"},props:{density:1,angularVelocity:5.5,restitution:0}}]}];class k{get zoom(){return this._zoom}set zoom(t){this._targetZoom=t}get x(){return this._position.x}set x(t){this._targetPosition.x=t}get y(){return this._position.y}set y(t){this._targetPosition.y=t}get position(){return this._position}setPosition(t,i=!1){return i?this._position={x:t.x,y:t.y}:this._targetPosition={x:t.x,y:t.y}}lock(t){this._locked=t}startFollowingMarbles(){this._shouldFollowMarbles=!0}initializePosition(){this._position={x:12.95,y:2},this._targetPosition={x:12.95,y:2},this._shouldFollowMarbles=!1}update({marbles:t,stage:i,needToZoom:e,targetIndex:s}){this._locked||this._calcTargetPositionAndZoom(t,i,e,s),this._position.x=this._interpolation(this.x,this._targetPosition.x),this._position.y=this._interpolation(this.y,this._targetPosition.y),this._zoom=this._interpolation(this._zoom,this._targetZoom)}_calcTargetPositionAndZoom(t,i,e,s){if(this._shouldFollowMarbles)if(t.length>0){let o=t[s]?t[s]:t[0];if(this.setPosition(o.position),e){let t=Math.abs(i.zoomY-this._position.y);this.zoom=Math.max(1,(1-t/3)*4)}else this.zoom=1}else this.zoom=1}_interpolation(t,i){let e=i-t;return .015384615384615385>Math.abs(e)?i:t+e/10}renderScene(t,i){let e=130*this._zoom;t.save(),t.translate(-this.x*this._zoom,-this.y*this._zoom),t.scale(this.zoom,this.zoom),t.translate(t.canvas.width/e,t.canvas.height/e),i(t),t.restore()}constructor(){this._position={x:0,y:0},this._targetPosition={x:0,y:0},this._zoom=1,this._targetZoom=1,this._locked=!1,this._shouldFollowMarbles=!1}}var M={};M=import.meta.resolve("cdgIR");var v={};v=import.meta.resolve("lfSvD");var S={};S=import.meta.resolve("9DwmV");var F={};F=import.meta.resolve("fkRhi");var P={};P=import.meta.resolve("9YLvj");var B={};B=import.meta.resolve("juMvj");class T{constructor(){this.sizeFactor=1,this._images={},this._theme=h.dark,this._starFieldPositions=[],this._initStarField()}_initStarField(){for(let t=0;t<100;t++)this._starFieldPositions.push({x:1200*Math.random(),y:900*Math.random(),size:2*Math.random()+1})}_renderStarField(){this.ctx.save(),this.ctx.fillStyle="rgba(255, 255, 255, 0.8)",this._starFieldPositions.forEach(t=>{this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.size,0,2*Math.PI),this.ctx.fill()}),this.ctx.restore()}get width(){return this._canvas.width}get height(){return this._canvas.height}get canvas(){return this._canvas}set theme(t){this._theme=t}async init(){await this._load(),this._canvas=document.createElement("canvas"),this._canvas.width=1200,this._canvas.height=900,this.ctx=this._canvas.getContext("2d",{alpha:!1}),document.body.appendChild(this._canvas);let t=t=>{let i=t?t[0].contentRect:this._canvas.getBoundingClientRect(),e=window.devicePixelRatio||1,s=Math.max(i.width*e,640),o=s/i.width*i.height;this._canvas.width=s,this._canvas.height=o,this.sizeFactor=s/i.width};new ResizeObserver(t).observe(this._canvas),t()}async _loadImage(t){return new Promise(i=>{let e=new Image;e.addEventListener("load",()=>{i(e)}),e.src=t})}async _load(){let t=[{name:"챔루",imgUrl:new URL(M)},{name:"쿠빈",imgUrl:new URL(v)},{name:"꽉변",imgUrl:new URL(S)},{name:"꽉변호사",imgUrl:new URL(S)},{name:"꽉 변호사",imgUrl:new URL(S)},{name:"주누피",imgUrl:new URL(F)},{name:"왈도쿤",imgUrl:new URL(P)}].map(({name:t,imgUrl:i})=>(async()=>{this._images[t]=await this._loadImage(i.toString())})());t.push((async()=>{await this._loadImage(new URL(B).toString())})()),await Promise.all(t)}render(t,i){if(this._theme=t.theme,this._theme.backgroundGradient){let t=this.ctx.createLinearGradient(0,0,0,this._canvas.height);this._theme.backgroundGradient.forEach((i,e)=>{t.addColorStop(e/(this._theme.backgroundGradient.length-1),i)}),this.ctx.fillStyle=t}else this.ctx.fillStyle=this._theme.background;this.ctx.fillRect(0,0,this._canvas.width,this._canvas.height),this._theme.backgroundGradient&&this._renderStarField(),this.ctx.save(),this.ctx.scale(65,65),this.ctx.textAlign="left",this.ctx.textBaseline="top",this.ctx.font="0.4pt sans-serif",this.ctx.lineWidth=3/(t.camera.zoom+65),t.camera.renderScene(this.ctx,()=>{this.renderEntities(t.entities),this.renderEffects(t),this.renderMarbles(t)}),this.ctx.restore(),i.forEach(i=>i.render(this.ctx,t,this._canvas.width,this._canvas.height)),t.particleManager.render(this.ctx),this.renderWinner(t)}renderEntities(t){this.ctx.save(),t.forEach(t=>{let i=this.ctx.getTransform();this.ctx.translate(t.x,t.y),this.ctx.rotate(t.angle),this.ctx.fillStyle=t.shape.color??this._theme.entity[t.shape.type].fill,this.ctx.strokeStyle=t.shape.color??this._theme.entity[t.shape.type].outline,this.ctx.shadowBlur=this._theme.entity[t.shape.type].bloomRadius,this.ctx.shadowColor=t.shape.bloomColor??t.shape.color??this._theme.entity[t.shape.type].bloom;let e=t.shape;switch(e.type){case"polyline":if(e.points.length>0){this.ctx.beginPath(),this.ctx.moveTo(e.points[0][0],e.points[0][1]);for(let t=1;t<e.points.length;t++)this.ctx.lineTo(e.points[t][0],e.points[t][1]);this.ctx.stroke()}break;case"box":let s=2*e.width,o=2*e.height;this.ctx.rotate(e.rotation),this.ctx.fillRect(-s/2,-o/2,s,o),this.ctx.strokeRect(-s/2,-o/2,s,o);break;case"circle":this.ctx.beginPath(),this.ctx.arc(0,0,e.radius,0,2*Math.PI,!1),this.ctx.stroke()}this.ctx.setTransform(i)}),this.ctx.restore()}renderEffects({effects:t,camera:i}){t.forEach(t=>t.render(this.ctx,65*i.zoom,this._theme))}renderMarbles({marbles:t,camera:i,winnerRank:e,allWinners:s,size:o}){let a=e-(s?.length||0),r={x:i.x,y:i.y,w:o.x,h:o.y,zoom:65*i.zoom};t.forEach((t,e)=>{t.render(this.ctx,65*i.zoom,e===a,!1,this._images[t.name]||void 0,r,this._theme)})}renderWinner({winners:t,theme:i}){if(!t||0===t.length)return;this.ctx.save();let e=t.map(t=>`#${t.position} ${t.marble.name}`).join(", "),s=.7*this._canvas.width,o=(this._canvas.width-s)/2,a=(this._canvas.height-220)/2;if(i.accentGlow){let t=this.ctx.createLinearGradient(o,a,o,this._canvas.height);t.addColorStop(0,"rgba(196, 30, 58, 0.95)"),t.addColorStop(1,"rgba(196, 30, 58, 0.95)"),this.ctx.fillStyle=t}else this.ctx.fillStyle=i.winnerBackground;this.ctx.fillRect(o,a,s,220),i.accentGlow&&(this.ctx.strokeStyle=i.accentGlow,this.ctx.lineWidth=3,this.ctx.shadowColor=i.accentGlow,this.ctx.shadowBlur=15,this.ctx.strokeRect(o,a,s,220),this.ctx.shadowBlur=0,this._drawDecorativeStar(o+20,a+30),this._drawDecorativeStar(o+s-40,a+30)),this.ctx.fillStyle=i.accentGlow||"#FFD700",this.ctx.strokeStyle=i.winnerOutline||"#8B0000",this.ctx.font="bold 64px sans-serif",this.ctx.textAlign="center",this.ctx.lineWidth=6;let r=a+75,n=o+s/2,p=t.length>1?i.accentGlow?"\uD83C\uDF84 Winners! \uD83C\uDF84":"Winners":i.accentGlow?"\uD83C\uDF84 Winner! \uD83C\uDF84":"Winner";i.winnerOutline&&this.ctx.strokeText(p,n,r),this.ctx.fillText(p,n,r),this.ctx.shadowBlur=0;let l=s-80,y=52;for(this.ctx.font=`bold ${y}px sans-serif`;this.ctx.measureText(e).width>l&&y>20;)y-=2,this.ctx.font=`bold ${y}px sans-serif`;this.ctx.lineWidth=Math.max(2,y/15),this.ctx.fillStyle="#FFFFFF",this.ctx.strokeStyle="#000000",this.ctx.textAlign="center";let c=a+120+55,h=o+s/2;this.ctx.strokeText(e,h,c),this.ctx.fillText(e,h,c),this.ctx.restore()}_drawDecorativeStar(t,i){this.ctx.save(),this.ctx.fillStyle="#FFD700",this.ctx.shadowColor="#FFD700",this.ctx.shadowBlur=10,this.ctx.beginPath();for(let e=0;e<5;e++){let s=2*Math.PI/5*e-Math.PI/2,o=t+15*Math.cos(s),a=i+15*Math.sin(s),r=s+Math.PI/5,n=t+7*Math.cos(r),p=i+7*Math.sin(r);0===e?this.ctx.moveTo(o,a):this.ctx.lineTo(o,a),this.ctx.lineTo(n,p)}this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}}class E{constructor(t,i){this._size=0,this._elapsed=0,this.isDestroy=!1,this._particles=[],this.position={x:t,y:i};for(let t=0;t<12;t++)this._particles.push({angle:2*Math.PI/12*t,speed:2*Math.random()+1})}update(t){this._elapsed+=t,this._size=this._elapsed/500*10,this._elapsed>500&&(this.isDestroy=!0)}render(t,i,e){t.save();let s=this._elapsed/500;t.globalAlpha=1-s*s,t.strokeStyle=e.skillColor,t.lineWidth=3/i,t.shadowColor=e.skillColor,t.shadowBlur=10,t.beginPath(),t.arc(this.position.x,this.position.y,this._size,0,2*Math.PI),t.stroke(),t.fillStyle=e.accentGlow||"#FFD700",this._particles.forEach(e=>{let s=.8*this._size,o=this.position.x+Math.cos(e.angle)*s*e.speed,a=this.position.y+Math.sin(e.angle)*s*e.speed;t.beginPath();for(let s=0;s<4;s++){let r=Math.PI/2*s+e.angle,n=o+2/i*Math.cos(r),p=a+2/i*Math.sin(r);0===s?t.moveTo(n,p):t.lineTo(n,p)}t.closePath(),t.fill()}),t.restore()}}function R(t,i,e){return{configurable:!0,get(){let t=e.value.bind(this);return Object.defineProperty(this,i,{value:t,configurable:!0,writable:!0}),t}}}class C{constructor(){this._currentY=0,this._targetY=0,this.baseFontHeight=16,this.fontHeight=16,this._userMoved=0,this._currentWinner=-1,this.maxY=0,this.winners=[],this.marbles=[],this.winnerRank=-1,this._scaleFactor=1}onWheel(t){this._targetY+=t.deltaY,this._targetY>this.maxY&&(this._targetY=this.maxY),this._userMoved=2e3}onDblClick(t){if(t&&navigator.clipboard){let t=[],i=0;t.push(...[...this.winners,...this.marbles].map(t=>(i++,[i.toString(),t.name,i-1===this.winnerRank?"☆":""].join("	")))),t.unshift("Rank	Name	Winner"),navigator.clipboard.writeText(t.join("\n")).then(()=>{this.messageHandler&&this.messageHandler("The result has been copied")})}}onMessage(t){this.messageHandler=t}render(t,{allWinners:i,marbles:e,winnerRank:s,winnerRanks:o,theme:a},r,n){let p=i||[],l=o||[s];this._scaleFactor=Math.max(1,r/1280),this.fontHeight=this.baseFontHeight*this._scaleFactor;let y=r-10*this._scaleFactor,c=Math.max(-this.fontHeight,this._currentY-n/2);this.maxY=Math.max(0,(e.length+p.length)*this.fontHeight+this.fontHeight),this._currentWinner=p.length,this.winners=p,this.marbles=e,this.winnerRank=s;let h=10*this._scaleFactor,u=11*this._scaleFactor,d=200*this._scaleFactor;t.save(),t.textAlign="right",t.font=`${h}pt sans-serif`,t.fillStyle="#666",t.fillText(`${p.length} / ${p.length+e.length}`,r-10*this._scaleFactor,this.fontHeight),t.beginPath(),t.rect(r-d,this.fontHeight+2,d,this.maxY),t.clip(),t.translate(0,-c),t.font=`bold ${u}pt sans-serif`,p.forEach((i,e)=>{let s=e*this.fontHeight;if(s>=c&&s<=c+t.canvas.height){t.fillStyle=`hsl(${i.hue} 100% ${a.marbleLightness}`;let o=l.includes(e);t.fillText(`${o?"☆":"✔"} ${i.name} #${e+1}`,y,20*this._scaleFactor+s)}}),t.font=`${h}pt sans-serif`,e.forEach((i,e)=>{let s=(e+p.length)*this.fontHeight;s>=c&&s<=c+t.canvas.height&&(t.fillStyle=`hsl(${i.hue} 100% ${a.marbleLightness}`,t.fillText(`${i.name} #${e+1+p.length}`,y,20*this._scaleFactor+s))}),t.restore()}update(t){-1!==this._currentWinner&&(this._userMoved>0?this._userMoved-=t:this._targetY=this._currentWinner*this.fontHeight+this.fontHeight,this._currentY!==this._targetY&&(this._currentY+=(this._targetY-this._currentY)*(t/250)),1>Math.abs(this._currentY-this._targetY)&&(this._currentY=this._targetY))}getBoundingBox(){return null}}y([R],C.prototype,"onWheel",null),y([R],C.prototype,"onDblClick",null);class D{constructor(){this.lastParams=null,this._onViewportChangeHandler=null,this.mousePosition=null,this._scaleFactor=1,this._baseScale=4,this.boundingBox={x:10,y:10,w:104,h:0}}getBoundingBox(){return this.boundingBox}onViewportChange(t){this._onViewportChangeHandler=t}update(){}onMouseMove(t){if(!t){this.mousePosition=null,this._onViewportChangeHandler&&this._onViewportChangeHandler();return}if(!this.lastParams)return;this.mousePosition={x:t.x,y:t.y};let i=this._baseScale*this._scaleFactor;this._onViewportChangeHandler&&this._onViewportChangeHandler({x:this.mousePosition.x/i,y:this.mousePosition.y/i})}render(t,i,e){if(!t)return;let{stage:s}=i;if(!s)return;this._scaleFactor=Math.max(1,e/1280);let o=this._baseScale*this._scaleFactor,a=10*this._scaleFactor;this.boundingBox.x=a,this.boundingBox.y=a,this.boundingBox.w=26*o,this.boundingBox.h=s.goalY*o,this.lastParams=i,this.ctx=t,t.save(),t.fillStyle=i.theme.minimapBackground,t.translate(a,a),t.scale(o,o),t.fillRect(0,0,26,s.goalY),this.ctx.lineWidth=3/(i.camera.zoom+65),this.drawEntities(i.entities,i.theme),this.drawMarbles(i),this.drawViewport(i),t.restore(),t.save(),t.strokeStyle="green",t.lineWidth=+this._scaleFactor,t.strokeRect(this.boundingBox.x,this.boundingBox.y,this.boundingBox.w,this.boundingBox.h),t.restore()}drawViewport(t){this.ctx.save();let{camera:i,size:e}=t,s=65*i.zoom,o=e.x/s,a=e.y/s;this.ctx.strokeStyle=t.theme.minimapViewport,this.ctx.lineWidth=1/s,this.ctx.strokeRect(i.x-o/2,i.y-a/2,o,a),this.ctx.restore()}drawEntities(t,i){this.ctx.save(),t.forEach(t=>{this.ctx.save(),this.ctx.fillStyle=t.shape.color??i.entity[t.shape.type].fill,this.ctx.strokeStyle=t.shape.color??i.entity[t.shape.type].outline,this.ctx.translate(t.x,t.y),this.ctx.rotate(t.angle),this.ctx.save();let e=t.shape;switch(e.type){case"box":let s=2*e.width,o=2*e.height;this.ctx.rotate(e.rotation),this.ctx.fillRect(-s/2,-o/2,s,o);break;case"circle":this.ctx.beginPath(),this.ctx.arc(0,0,e.radius,0,2*Math.PI,!1),this.ctx.stroke();break;case"polyline":if(e.points.length>0){this.ctx.beginPath(),this.ctx.moveTo(e.points[0][0],e.points[0][1]);for(let t=1;t<e.points.length;t++)this.ctx.lineTo(e.points[t][0],e.points[t][1]);this.ctx.stroke()}}this.ctx.restore(),this.ctx.restore()}),this.ctx.restore()}drawMarbles(t){let{marbles:i}=t,e={x:t.camera.x,y:t.camera.y,w:t.size.x,h:t.size.y,zoom:65*t.camera.zoom};i.forEach(i=>{i.render(this.ctx,1,!1,!0,void 0,e,t.theme)})}}y([R],D.prototype,"onMouseMove",null);var z=async(...t)=>{let i=WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),{default:e}=await (i?r("iyjrR"):r("8ZFBQ"));return await e(...t)};class I{async init(){this.Box2D=await z(),this.gravity=new this.Box2D.b2Vec2(0,10),this.world=new this.Box2D.b2World(this.gravity),console.log("box2d ready")}clear(){this.clearEntities()}clearMarbles(){Object.values(this.marbleMap).forEach(t=>{this.world.DestroyBody(t)}),this.marbleMap={}}createStage(t){this.createEntities(t.entities)}createEntities(t){if(!t)return;let i={static:this.Box2D.b2_staticBody,kinematic:this.Box2D.b2_kinematicBody};t.forEach(t=>{let e,s=new this.Box2D.b2BodyDef;s.set_type(i[t.type]);let o=this.world.CreateBody(s),a=new this.Box2D.b2FixtureDef;switch(a.set_density(t.props.density),a.set_restitution(t.props.restitution),t.shape.type){case"box":(e=new this.Box2D.b2PolygonShape).SetAsBox(t.shape.width,t.shape.height,0,t.shape.rotation),a.set_shape(e),o.CreateFixture(a);break;case"polyline":e=new this.Box2D.b2EdgeShape;for(let i=0;i<t.shape.points.length-1;i++){let e=t.shape.points[i],s=t.shape.points[i+1],a=new this.Box2D.b2Vec2(e[0],e[1]),r=new this.Box2D.b2Vec2(s[0],s[1]),n=new this.Box2D.b2EdgeShape;n.SetTwoSided(a,r),o.CreateFixture(n,1)}break;case"circle":(e=new this.Box2D.b2CircleShape).set_m_radius(t.shape.radius),a.set_shape(e),o.CreateFixture(a)}o.SetAngularVelocity(t.props.angularVelocity),o.SetTransform(new this.Box2D.b2Vec2(t.position.x,t.position.y),0),this.entities.push({body:o,x:t.position.x,y:t.position.y,angle:0,shape:t.shape,life:t.props.life??-1})})}clearEntities(){this.entities.forEach(t=>{this.world.DestroyBody(t.body)}),this.entities=[]}createMarble(t,i,e){let s=new this.Box2D.b2CircleShape;s.set_m_radius(.25);let o=new this.Box2D.b2BodyDef;o.set_type(this.Box2D.b2_dynamicBody),o.set_position(new this.Box2D.b2Vec2(i,e));let a=this.world.CreateBody(o);a.CreateFixture(s,1+Math.random()),a.SetAwake(!1),a.SetEnabled(!1),this.marbleMap[t]=a}shakeMarble(t){let i=this.marbleMap[t];i&&i.ApplyLinearImpulseToCenter(new this.Box2D.b2Vec2(10*Math.random()-5,10*Math.random()-5),!0)}removeMarble(t){let i=this.marbleMap[t];i&&(this.world.DestroyBody(i),delete this.marbleMap[t])}getMarblePosition(t){let i=this.marbleMap[t];if(!i)return{x:0,y:0,angle:0};{let t=i.GetPosition();return{x:t.x,y:t.y,angle:i.GetAngle()}}}getEntities(){return this.entities.map(t=>({...t,angle:t.body.GetAngle()}))}impact(t){let i=this.marbleMap[t];i&&Object.values(this.marbleMap).forEach(t=>{if(t===i)return;let e=new this.Box2D.b2Vec2(t.GetPosition().x,t.GetPosition().y);if(e.op_sub(i.GetPosition()),100>e.LengthSquared()){e.Normalize();let i=1-e.Length()/10;e.op_mul(i*i*5),t.ApplyLinearImpulseToCenter(e,!0)}})}start(){for(let t in this.marbleMap){let i=this.marbleMap[t];i.SetAwake(!0),i.SetEnabled(!0)}}step(t){this.deleteCandidates.forEach(t=>{this.world.DestroyBody(t)}),this.deleteCandidates=[],this.world.Step(t,6,2);for(let t=this.entities.length-1;t>=0;t--){let i=this.entities[t];if(i.life>0){let e=i.body.GetContactList();e.contact&&e.contact.IsTouching()&&(this.deleteCandidates.push(i.body),this.entities.splice(t,1))}}}constructor(){this.marbleMap={},this.entities=[],this.deleteCandidates=[]}}class W{constructor(){this.bound={x:0,y:0,w:0,h:0},this.isEnabled=!1,this.icon=new Image,this.icon.src=new URL(B).toString()}get speed(){return this.isEnabled?2:1}update(t){}render(t,i,e,s){this.bound.w=e/2,this.bound.h=s/2,this.bound.x=this.bound.w/2,this.bound.y=this.bound.h/2;let o=this.bound.x+this.bound.w/2,a=this.bound.y+this.bound.h/2;this.isEnabled&&(t.save(),t.strokeStyle="white",t.globalAlpha=.5,t.drawImage(this.icon,o-100,a-100,200,200),t.restore())}getBoundingBox(){return this.bound}onMouseDown(t){this.isEnabled=!0}onMouseUp(t){this.isEnabled=!1}}var A={};A=import.meta.resolve("ftUen");var Y={};Y=import.meta.resolve("bsMA0");var L={};L=import.meta.resolve("81bEE");var O={};O=import.meta.resolve("afhqB");var U={};U=import.meta.resolve("lGPCn");var $={};$=import.meta.resolve("kT8FC");var H={};H=import.meta.resolve("c4SxZ");class G{async init(){await this._loadSounds()}async _loadSounds(){let t=await this._loadAudioSafe([i(A),i(Y),i(L)]);t.length>0&&this.sounds.set("collision",t);let e=await this._loadAudioSafe([i(O)]);e.length>0&&this.sounds.set("impact",e);let s=await this._loadAudioSafe([i(U)]);s.length>0&&this.sounds.set("winner",s);let o=await this._loadAudioSafe([i($)]);o.length>0&&this.sounds.set("start",o);try{this.backgroundMusic=await this._loadAudio(i(H)),this.backgroundMusic.loop=!0,this.backgroundMusic.volume=this.musicVolume}catch(t){console.warn("Background music not found:",t)}}async _loadAudioSafe(t){let i=[];for(let e of t)try{let t=await this._loadAudio(e);i.push(t)}catch(t){console.warn(`Failed to load audio: ${e}`,t)}return i}async _loadAudio(t){return new Promise((i,e)=>{let s=new Audio;s.addEventListener("canplaythrough",()=>i(s),{once:!0}),s.addEventListener("error",e,{once:!0}),s.src=t,s.load()})}play(t){if(this.isMuted)return;let i=this.sounds.get(t);if(!i||0===i.length)return;let e=i[Math.floor(Math.random()*i.length)].cloneNode();e.volume=this.volume,e.play().catch(t=>console.warn("Audio play failed:",t))}startBackgroundMusic(){!this.isMuted&&this.backgroundMusic&&(this.backgroundMusic.currentTime=0,this.backgroundMusic.play().catch(t=>console.warn("Music play failed:",t)))}stopBackgroundMusic(){this.backgroundMusic&&this.backgroundMusic.pause()}setMuted(t){this.isMuted=t,t&&this.backgroundMusic&&this.backgroundMusic.pause()}setVolume(t){this.volume=Math.max(0,Math.min(1,t))}setMusicVolume(t){this.musicVolume=Math.max(0,Math.min(1,t)),this.backgroundMusic&&(this.backgroundMusic.volume=this.musicVolume)}constructor(){this.sounds=new Map,this.backgroundMusic=null,this.isMuted=!1,this.volume=.7,this.musicVolume=.3}}class j extends EventTarget{get isReady(){return this._isReady}constructor(){super(),this._marbles=[],this._lastTime=0,this._elapsed=0,this._updateInterval=10,this._timeScale=1,this._speed=1,this._winners=[],this._selectedWinners=[],this._particleManager=new V,this._stage=null,this._camera=new k,this._renderer=new T,this._effects=[],this._winnerRank=0,this._winnerRanks=[0],this._totalMarbleCount=0,this._goalDist=1/0,this._isRunning=!1,this._winner=null,this._uiObjects=[],this._isReady=!1,this._theme=h.dark,this._audioManager=new G,this._renderer.init().then(()=>{this._init().then(()=>{this._isReady=!0,this._update()})})}getZoom(){return 65*this._camera.zoom}addUiObject(t){this._uiObjects.push(t),t.onWheel&&this._renderer.canvas.addEventListener("wheel",t.onWheel),t.onMessage&&t.onMessage(t=>{console.log("onMessage",t),this.dispatchEvent(new CustomEvent("message",{detail:t}))})}_update(){this._lastTime||(this._lastTime=Date.now());let t=Date.now();this._elapsed+=(t-this._lastTime)*this._speed*this.fastForwarder.speed,this._elapsed>100&&(this._elapsed%=100),this._lastTime=t;let i=this._updateInterval/1e3*this._timeScale;for(;this._elapsed>=this._updateInterval;)this.physics.step(i),this._updateMarbles(this._updateInterval),this._particleManager.update(this._updateInterval),this._updateEffects(this._updateInterval),this._elapsed-=this._updateInterval,this._uiObjects.forEach(t=>t.update(this._updateInterval));this._marbles.length>1&&this._marbles.sort((t,i)=>i.y-t.y),this._stage&&this._camera.update({marbles:this._marbles,stage:this._stage,needToZoom:this._goalDist<3,targetIndex:this._winners.length>0?this._winnerRank-this._winners.length:0}),this._render(),window.requestAnimationFrame(this._update)}_updateMarbles(t){if(!this._stage)return;for(let i=0;i<this._marbles.length;i++){let e=this._marbles[i];if(e.update(t),e.skill===c.Impact&&(this._effects.push(new E(e.x,e.y)),this.physics.impact(e.id)),e.y>this._stage.goalY){this._winners.push(e);let t=this._winners.length-1;this._winnerRanks.includes(t)&&this._selectedWinners.push({marble:e,position:t+1});let i=this._winnerRanks.every(t=>t<this._winners.length),s=Math.max(...this._winnerRanks);this._isRunning&&i&&t===s&&(this.dispatchEvent(new CustomEvent("goal",{detail:{winner:e.name}})),this._winner=e,this._isRunning=!1,this._audioManager.stopBackgroundMusic(),this._audioManager.play("winner"),this._particleManager.shot(this._renderer.width,this._renderer.height)),setTimeout(()=>{this.physics.removeMarble(e.id)},500)}}let i=Math.max(...this._winnerRanks)-this._winners.length,e=this._marbles[i]?this._marbles[i].y:0;this._goalDist=Math.abs(this._stage.zoomY-e),this._timeScale=this._calcTimeScale(),this._marbles=this._marbles.filter(t=>t.y<=this._stage.goalY)}_calcTimeScale(){if(!this._stage)return 1;let t=Math.max(...this._winnerRanks),i=t-this._winners.length;return this._winners.length<t+1&&this._goalDist<3&&this._marbles[i]&&this._marbles[i].y>this._stage.zoomY-3.5999999999999996&&(this._marbles[i-1]||this._marbles[i+1])?Math.max(.4,this._goalDist/3):1}_updateEffects(t){this._effects.forEach(i=>i.update(t)),this._effects=this._effects.filter(t=>!t.isDestroy)}_render(){if(!this._stage)return;let t=Math.max(...this._winnerRanks),i={camera:this._camera,stage:this._stage,entities:this.physics.getEntities(),marbles:this._marbles,winners:this._selectedWinners,allWinners:this._winners,particleManager:this._particleManager,effects:this._effects,winnerRank:t,winnerRanks:this._winnerRanks,winner:this._winner,size:{x:this._renderer.width,y:this._renderer.height},theme:this._theme};this._renderer.render(i,this._uiObjects)}async _init(){this.physics=new I,await this.physics.init(),await this._audioManager.init(),this.addUiObject(new C),this.attachEvent();let t=new D;t.onViewportChange(t=>{t?(this._camera.setPosition(t,!1),this._camera.lock(!0)):this._camera.lock(!1)}),this.addUiObject(t),this.fastForwarder=new W,this.addUiObject(this.fastForwarder),this._stage=_[0],this._loadMap()}mouseHandler(t,i){let e=`on${t}`,s=this._renderer.sizeFactor,o={x:i.offsetX*s,y:i.offsetY*s};this._uiObjects.forEach(t=>{if(!t[e])return;let s=t.getBoundingBox();s?s&&o.x>=s.x&&o.y>=s.y&&o.x<=s.x+s.w&&o.y<=s.y+s.h?t[e]({x:o.x-s.x,y:o.y-s.y,button:i.button}):t[e](void 0):t[e]({...o,button:i.button})})}attachEvent(){["MouseMove","MouseUp","MouseDown","DblClick"].forEach(t=>{this._renderer.canvas.addEventListener(t.toLowerCase().replace("mouse","pointer"),this.mouseHandler.bind(this,t))}),this._renderer.canvas.addEventListener("contextmenu",t=>{t.preventDefault()})}_loadMap(){if(!this._stage)throw Error("No map has been selected");this.physics.createStage(this._stage),this._camera.initializePosition()}clearMarbles(){this.physics.clearMarbles(),this._winner=null,this._winners=[],this._selectedWinners=[],this._marbles=[]}start(){this._isRunning=!0,this._winnerRanks=g.winningRanks.filter(t=>t<this._marbles.length),0===this._winnerRanks.length&&(this._winnerRanks=[0]),this._winnerRank=Math.max(...this._winnerRanks),this._camera.startFollowingMarbles(),this._audioManager.play("start"),setTimeout(()=>{this._audioManager.startBackgroundMusic()},500),this.physics.start(),this._marbles.forEach(t=>t.isActive=!0)}setSpeed(t){if(t<=0)throw Error("Speed multiplier must larger than 0");this._speed=t}setTheme(t){this._theme=h[t],this._renderer.theme=this._theme}enableSnow(){this._particleManager.enableSnow(this._renderer.width,this._renderer.height)}disableSnow(){this._particleManager.disableSnow()}getSpeed(){return this._speed}setWinningRank(t){this._winnerRank=t}setWinningRanks(t){this._winnerRanks=t,this._winnerRank=Math.max(...t)}setAudioMuted(t){this._audioManager.setMuted(t)}setAudioVolume(t){this._audioManager.setVolume(t)}setMarbles(t){this.reset();let i=t.slice(),e=-1/0,s=1/0,o=i.map(t=>{let i=function(t){let i=/\/(\d+)/,e=/\*(\d+)/,s=i.test(t),o=e.test(t),a=d(/^\s*([^\/*]+)?/,t);return a?{name:a,weight:s?parseInt(d(i,t)):1,count:o?parseInt(d(e,t)):1}:null}(t);if(!i)return null;let{name:o,weight:a,count:r}=i;return a>e&&(e=a),a<s&&(s=a),{name:o,weight:a,count:r}}).filter(t=>!!t),a=e-s,r=0;o.forEach(t=>{t&&(t.weight=.1+(a?(t.weight-s)/a:0),r+=t.count)});let n=function(t){let i,e=t.slice(),s=e.length;for(;0!==s;)i=Math.floor(Math.random()*s),s--,[e[s],e[i]]=[e[i],e[s]];return e}(Array(r).fill(0).map((t,i)=>i));o.forEach(t=>{if(t)for(let i=0;i<t.count;i++){let i=n.pop()||0;this._marbles.push(new b(this.physics,i,r,t.name,t.weight))}}),this._totalMarbleCount=r}_clearMap(){this.physics.clear(),this._marbles=[]}reset(){this.clearMarbles(),this._clearMap(),this._loadMap(),this._goalDist=1/0}getCount(){return this._marbles.length}getMaps(){return _.map((t,i)=>({index:i,title:t.title}))}setMap(t){if(t<0||t>_.length-1)throw Error("Incorrect map number");let i=this._marbles.map(t=>t.name);this._stage=_[t],this.setMarbles(i),this._camera.initializePosition()}}y([R],j.prototype,"_update",null),y([R],j.prototype,"mouseHandler",null),"serviceWorker"in navigator&&window.addEventListener("load",()=>{let t=`${window.location.origin}/roulette/service-worker.js`;navigator.serviceWorker.register(t).then(t=>console.log("service worker registered",t.scope)).catch(t=>console.error("service worker registration failed",t))});const N=new j;window.roulette=N,window.options=g;
//# sourceMappingURL=roulette.94108cc6.js.map
